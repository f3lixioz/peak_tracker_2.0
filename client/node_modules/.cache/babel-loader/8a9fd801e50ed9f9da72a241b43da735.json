{"ast":null,"code":"import _regeneratorRuntime from\"/home/merlin/SDI/co_14ers/peak_finder/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/merlin/SDI/co_14ers/peak_finder/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/merlin/SDI/co_14ers/peak_finder/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useEffect,useState}from\"react\";import EditDate from\"./EditDate\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ListPeak=function ListPeak(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),peak=_useState2[0],setPeak=_useState2[1];//Get all\nvar getPeak=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,jsonData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"http://localhost:5000/peak\");case 3:response=_context.sent;_context.next=6;return response.json();case 6:jsonData=_context.sent;setPeak(jsonData);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.error(_context.t0.message);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function getPeak(){return _ref.apply(this,arguments);};}();//Delete\nvar delPeak=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var _delPeak;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"http://localhost:5000/peak/\".concat(id),{method:\"DELETE\"});case 3:_delPeak=_context2.sent;setPeak(peak.filter(function(peak){return peak.peak_id!==id;}));_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0.message);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function delPeak(_x){return _ref2.apply(this,arguments);};}();useEffect(function(){getPeak();},[]);//[] To avoid making multiple requests\nreturn/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(\"table\",{class:\"table mt-5 text-white text-center\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{width:\"300\",children:\"Mountain Peaks\"}),/*#__PURE__*/_jsx(\"th\",{width:\"300\",children:\"Elevation (ft)\"}),/*#__PURE__*/_jsx(\"th\",{width:\"300\",children:\"Summit Date\"}),/*#__PURE__*/_jsx(\"th\",{width:\"10\"}),/*#__PURE__*/_jsx(\"th\",{width:\"10\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:peak.map(function(peak){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:peak.peak_name}),/*#__PURE__*/_jsx(\"td\",{children:peak.peak_elv}),/*#__PURE__*/_jsx(\"td\",{children:peak.bag_date}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(EditDate,{peak:peak})}),/*#__PURE__*/_jsx(\"td\",{className:\"w3-middle-align\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:function onClick(){return delPeak(peak.peak_id);},children:\"Delete\"})})]},peak.peak_id);})})]})});};export default ListPeak;","map":{"version":3,"sources":["/home/merlin/SDI/co_14ers/peak_finder/client/src/components/ListPeak.js"],"names":["React","Fragment","useEffect","useState","EditDate","ListPeak","peak","setPeak","getPeak","fetch","response","json","jsonData","console","error","message","delPeak","id","method","filter","peak_id","map","peak_name","peak_elv","bag_date"],"mappings":"seAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,CAAoCC,QAApC,KAAmD,OAAnD,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,C,wFAGA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,eAEKF,QAAQ,CAAC,EAAD,CAFb,wCAEZG,IAFY,eAENC,OAFM,eAInB;AACA,GAAMC,CAAAA,OAAO,0FAAG,+LAGeC,CAAAA,KAAK,CAAC,4BAAD,CAHpB,QAGFC,QAHE,qCAIeA,CAAAA,QAAQ,CAACC,IAAT,EAJf,QAIFC,QAJE,eAMRL,OAAO,CAACK,QAAD,CAAP,CANQ,iFAQRC,OAAO,CAACC,KAAR,CAAc,YAAIC,OAAlB,EARQ,qEAAH,kBAAPP,CAAAA,OAAO,0CAAb,CAYA;AACA,GAAMQ,CAAAA,OAAO,2FAAG,kBAAOC,EAAP,2KAEcR,CAAAA,KAAK,sCAA+BQ,EAA/B,EAAqC,CAACC,MAAM,CAAE,QAAT,CAArC,CAFnB,QAEFF,QAFE,gBAGRT,OAAO,CAACD,IAAI,CAACa,MAAL,CAAY,SAAAb,IAAI,QAAIA,CAAAA,IAAI,CAACc,OAAL,GAAiBH,EAArB,EAAhB,CAAD,CAAP,CAHQ,mFAKRJ,OAAO,CAACC,KAAR,CAAc,aAAIC,OAAlB,EALQ,sEAAH,kBAAPC,CAAAA,OAAO,6CAAb,CASAd,SAAS,CAAE,UAAM,CACbM,OAAO,GACV,CAFQ,CAEN,EAFM,CAAT,CAEQ;AAER,mBAAO,KAAC,QAAD,wBACH,eAAO,KAAK,CAAC,mCAAb,wBACI,oCACA,mCACI,WAAI,KAAK,CAAC,KAAV,4BADJ,cAEI,WAAI,KAAK,CAAC,KAAV,4BAFJ,cAGI,WAAI,KAAK,CAAC,KAAV,yBAHJ,cAII,WAAI,KAAK,CAAC,IAAV,EAJJ,cAKI,WAAI,KAAK,CAAC,IAAV,EALJ,GADA,EADJ,cAUI,uBACCF,IAAI,CAACe,GAAL,CAAS,SAAAf,IAAI,qBACV,mCACI,oBAAKA,IAAI,CAACgB,SAAV,EADJ,cAEI,oBAAKhB,IAAI,CAACiB,QAAV,EAFJ,cAGI,oBAAKjB,IAAI,CAACkB,QAAV,EAHJ,cAII,iCAAI,KAAC,QAAD,EAAU,IAAI,CAAIlB,IAAlB,EAAJ,EAJJ,cAKI,WAAI,SAAS,CAAC,iBAAd,uBAAgC,eAAQ,SAAS,CAAG,gBAApB,CAAqC,OAAO,CAAE,yBAAMU,CAAAA,OAAO,CAACV,IAAI,CAACc,OAAN,CAAb,EAA9C,oBAAhC,EALJ,GAASd,IAAI,CAACc,OAAd,CADU,EAAb,CADD,EAVJ,GADG,EAAP,CAyBH,CAxDD,CA0DA,cAAef,CAAAA,QAAf","sourcesContent":["import React, {Fragment, useEffect, useState} from \"react\";\r\nimport EditDate from \"./EditDate\"\r\n\r\n\r\nconst ListPeak = () => {\r\n    \r\n    const [peak, setPeak] = useState([]);\r\n    \r\n    //Get all\r\n    const getPeak = async () => {\r\n        try {\r\n            \r\n            const response = await fetch(\"http://localhost:5000/peak\")\r\n            const jsonData = await response.json()\r\n\r\n            setPeak(jsonData);\r\n        } catch (err) {\r\n            console.error(err.message)\r\n        }\r\n    }\r\n\r\n    //Delete\r\n    const delPeak = async (id) => {\r\n        try {\r\n            const delPeak = await fetch(`http://localhost:5000/peak/${id}`, {method: \"DELETE\"});\r\n            setPeak(peak.filter(peak => peak.peak_id !== id));\r\n        } catch (err) {\r\n            console.error(err.message)\r\n        }\r\n    }\r\n\r\n    useEffect( () => {\r\n        getPeak();\r\n    }, []); //[] To avoid making multiple requests\r\n\r\n    return <Fragment>        \r\n        <table class=\"table mt-5 text-white text-center\">\r\n            <thead>\r\n            <tr>\r\n                <th width=\"300\">Mountain Peaks</th>\r\n                <th width=\"300\">Elevation (ft)</th>\r\n                <th width=\"300\">Summit Date</th>\r\n                <th width=\"10\"></th>\r\n                <th width=\"10\"></th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            {peak.map(peak => (\r\n                <tr key={peak.peak_id}>\r\n                    <td>{peak.peak_name}</td>\r\n                    <td>{peak.peak_elv}</td>\r\n                    <td>{peak.bag_date}</td>\r\n                    <td><EditDate peak = {peak}/></td>\r\n                    <td className=\"w3-middle-align\"><button className = \"btn btn-danger\" onClick={() => delPeak(peak.peak_id)}>Delete</button></td>\r\n                </tr>\r\n            ))}\r\n            </tbody>\r\n    </table>\r\n        </Fragment>;\r\n    \r\n};\r\n\r\nexport default ListPeak;"]},"metadata":{},"sourceType":"module"}